---
- hosts: all
  #  become: runas
  #  gather_facts: false

  vars:
  - packages:
    - notepadplusplus
    - googlechrome
    - teracopy
    - 7zip
    - firefox
    - libreoffice-fresh
    - foxitreader
    - jre8
    - chrome-remote-desktop-chrome
    - chrome-remote-desktop-host
    - dotnetfx
    - cutepdf
    - vlc
    - anydesk
    - glpi-agent  

  vars:
  - programas:
      HP:
        - HP Support Assistant
        - HP Security Manager
      Dell:
        - Dell Command Update
        - Dell SupportAssist

  tasks:
  - name: Instalando Programas Essenciais - IFTO 
    win_chocolatey:
      name: "{{ packages }}"
      state: present

  - name: Verificando o System Vendor da m√°quina
    win_shell: |
      $vendor = Get-WmiObject -Class:Win32_ComputerSystem | Select-Object -ExpandProperty Manufacturer
       Write-Host "System Vendor: $vendor"
    register: system_vendor

  - name: Instalando programas do System Vendor
    win_chocolatey:
      name: "{{ item }}"
      state: present
    with_items: "{{ programas[system_vendor.stdout] }}"
